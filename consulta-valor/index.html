<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banana TopChips - Carrinho</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="../src/favicon/banana-chips.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
    background: linear-gradient(135deg, #FFFDF5 0%, #FFF9E1 100%);
    font-family: 'Inter', sans-serif;
}

/* Bot√£o amarelo */
.btn-banana { 
    background: linear-gradient(135deg, #FACC15, #EAB308);
    transition: all 0.25s ease;
    box-shadow: 0 6px 14px rgba(250, 204, 21, 0.35);
}

.btn-banana:hover { 
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(250, 204, 21, 0.45);
}

/* Cards */
.card-banana { 
    border-radius: 22px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    transition: all 0.25s ease;
}

.card-banana:hover {
    transform: translateY(-4px);
    box-shadow: 0 18px 35px rgba(0, 0, 0, 0.08);
}

/* Painel carrinho */
.cart-panel {
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(10px);
    border-radius: 32px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.08);
    border: 1px solid rgba(255,255,255,0.4);
}

/* Modal */
.modal-bg { 
    background-color: rgba(0,0,0,0.35);
    backdrop-filter: blur(6px);
}

/* Inputs */
input {
    transition: all 0.2s ease;
}

input:focus {
    transform: scale(1.02);
}

/* Bot√£o voltar */
.btn-voltar {
    display: inline-flex;
    align-items: center;
    text-decoration: none;
    color: #9ca3af;
    font-size: 0.9rem;
    font-weight: 600;
    transition: all 0.25s ease;
    padding: 10px 18px;
    border-radius: 999px;
}

.btn-voltar:hover {
    color: #d97706;
    background: #FEF3C7;
    transform: translateX(-4px);
}

.btn-voltar svg {
    margin-right: 8px;
}

/* Total */
#total-price {
    font-size: 28px;
    font-weight: 900;
}
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-5xl mx-auto">
        <header class="flex justify-between items-center mb-10">
            <a href="../index.html" class="btn-voltar">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Voltar para o in√≠cio
        </a>
            <h1 class="text-2xl font-extrabold text-gray-800 italic">üçå BANANA TOPCHIPS</h1>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-2 space-y-4">
                <h2 class="text-xs font-extrabold text-gray-400 uppercase tracking-widest mb-4">Escolha seus itens</h2>
                
                <div id="product-list" class="space-y-4">
                    <div class="card-banana bg-white p-6 border border-yellow-100 flex flex-col md:flex-row justify-between items-center gap-4 transition-all hover:border-yellow-300">
                        <div class="text-center md:text-left">
                            <h3 class="font-bold text-gray-800 text-xl">Fam√≠lia Crocante (1kg)</h3>
                            <p class="text-gray-500 text-sm">Alegria para a casa toda</p>
                            <span class="text-yellow-600 font-extrabold text-2xl block mt-1">R$ 60,00</span>
                        </div>
                        <button onclick="openFlavorModal('Fam√≠lia Crocante (1kg)', 60.00)" class="btn-banana px-10 py-4 rounded-2xl font-bold text-xs shadow-md uppercase tracking-wider">Adicionar</button>
                    </div>

                    <div class="card-banana bg-white p-6 border border-yellow-100 flex flex-col md:flex-row justify-between items-center gap-4 transition-all hover:border-yellow-300">
                        <div class="text-center md:text-left">
                            <h3 class="font-bold text-gray-800 text-xl">Meio kilo de felicidade (500g)</h3>
                            <p class="text-gray-500 text-sm">O tamanho ideal para compartilhar</p>
                            <span class="text-yellow-600 font-extrabold text-2xl block mt-1">R$ 30,00</span>
                        </div>
                        <button onclick="openFlavorModal('Meio kilo de felicidade (500g)', 30.00)" class="btn-banana px-10 py-4 rounded-2xl font-bold text-xs shadow-md uppercase tracking-wider">Adicionar</button>
                    </div>

                    <div class="card-banana bg-white p-6 border border-yellow-100 flex flex-col md:flex-row justify-between items-center gap-4 transition-all hover:border-yellow-300">
                        <div class="text-center md:text-left">
                            <h3 class="font-bold text-gray-800 text-xl">Snack Express (30g)</h3>
                            <p class="text-gray-500 text-sm">Energia r√°pida para o dia</p>
                            <span class="text-yellow-600 font-extrabold text-2xl block mt-1">R$ 5,00</span>
                        </div>
                        <button onclick="openFlavorModal('Snack Express (30g)', 5.00)" class="btn-banana px-10 py-4 rounded-2xl font-bold text-xs shadow-md uppercase tracking-wider">Adicionar</button>
                    </div>
                </div>
            </div>

            <div class="cart-panel p-6 h-fit sticky top-8">
                <h2 class="text-lg font-extrabold text-gray-800 mb-6 flex items-center gap-2 uppercase text-sm tracking-tighter">üõí Resumo do Pedido</h2>
                
                <div id="cart-items" class="space-y-4 mb-6 max-h-60 overflow-y-auto">
                    <p class="text-gray-400 text-center py-4 italic text-sm">Carrinho vazio</p>
                </div>

                <div class="border-t pt-6 space-y-3 mb-6">
                    <h3 class="font-extrabold text-gray-800 text-xs uppercase tracking-widest mb-2">Dados de Entrega</h3>
                    
                    <input type="text" id="cust-name" placeholder="Seu Nome" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400 font-medium">
                    
                    <div class="grid grid-cols-2 gap-2">
                        <input type="text" id="end-cep" placeholder="CEP (00000-000)" maxlength="9" oninput="maskCEP(this)" class="p-4 bg-gray-50 border border-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400 font-medium">
                        <input type="text" id="end-bairro" placeholder="Bairro" class="p-4 bg-gray-50 border border-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400 font-medium">
                    </div>

                    <div class="grid grid-cols-3 gap-2">
                        <input type="text" id="end-rua" placeholder="Rua / Av" class="col-span-2 p-4 bg-gray-50 border border-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400 font-medium">
                        <input type="text" id="end-num" placeholder="N¬∫" class="p-4 bg-gray-50 border border-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400 font-medium">
                    </div>

                    <input type="text" id="end-ref" placeholder="Ponto de Refer√™ncia" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400 font-medium">
                </div>

                <div class="border-t pt-4 space-y-2">
                    <div class="flex justify-between text-gray-500 font-bold text-xs uppercase tracking-widest">
                        <span>Taxa Entrega</span>
                        <span>R$ 5,00</span>
                    </div>
                    <div class="flex justify-between text-2xl font-black text-gray-900 mt-2">
                        <span>TOTAL</span>
                        <span id="total-price" class="text-orange-500">R$ 5,00</span>
                    </div>
                </div>

                <button onclick="checkout()" class="w-full mt-6 bg-orange-500 hover:bg-orange-600 text-white font-extrabold py-5 rounded-3xl shadow-lg transition-all flex justify-center items-center gap-2 uppercase tracking-widest text-sm">
                    Fazer Pedido
                </button>
            </div>
        </div>
    </div>

    <div id="flavor-modal" class="hidden fixed inset-0 modal-bg flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-[40px] p-8 max-w-sm w-full shadow-2xl">
            <h3 id="modal-title" class="text-xl font-extrabold mb-4 text-gray-800 text-center uppercase italic"></h3>
            
            <div class="space-y-2 mb-6 text-sm">
                <label class="flex items-center gap-3 p-4 border rounded-2xl cursor-pointer hover:bg-yellow-50 transition border-gray-100 font-semibold">
                    <input type="checkbox" name="flavor" value="Tradicional Salgada" class="w-5 h-5 accent-yellow-500"> Tradicional Salgada
                </label>
                <label class="flex items-center gap-3 p-4 border rounded-2xl cursor-pointer hover:bg-yellow-50 transition border-gray-100 font-semibold">
                    <input type="checkbox" name="flavor" value="Doce com Canela" class="w-5 h-5 accent-yellow-500"> Doce com Canela
                </label>
                <label class="flex items-center gap-3 p-4 border rounded-2xl cursor-pointer hover:bg-yellow-50 transition border-gray-100 font-semibold">
                    <input type="checkbox" name="flavor" value="Pimenta e Lim√£o" class="w-5 h-5 accent-yellow-500"> Pimenta e Lim√£o
                </label>
            </div>
            
            <div class="flex items-center justify-between mb-8 bg-gray-50 p-5 rounded-2xl">
                <span class="font-bold text-gray-400 text-xs uppercase tracking-widest">Quantidade:</span>
                <div class="flex items-center gap-6">
                    <button onclick="changeQty(-1)" class="w-12 h-12 flex items-center justify-center bg-white border border-gray-200 rounded-full font-black shadow-sm text-xl">-</button>
                    <span id="modal-qty" class="font-black text-2xl">1</span>
                    <button onclick="changeQty(1)" class="w-12 h-12 flex items-center justify-center bg-white border border-gray-200 rounded-full font-black shadow-sm text-xl">+</button>
                </div>
            </div>

            <div class="flex gap-3">
                <button onclick="closeModal()" class="flex-1 py-4 text-gray-400 font-bold uppercase text-xs">Sair</button>
                <button onclick="addToCart()" class="flex-1 py-4 btn-banana rounded-2xl font-extrabold text-gray-800 uppercase text-xs tracking-wider">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
        let cart = [];
        let currentProduct = null;
        let qty = 1;
        const deliveryFee = 5.00;

        function maskCEP(input) {
            let value = input.value.replace(/\D/g, "");
            if (value.length > 5) {
                value = value.substring(0, 5) + "-" + value.substring(5, 8);
            }
            input.value = value;
        }

        function openFlavorModal(name, price) {
            currentProduct = { name, price };
            qty = 1;
            document.getElementById('modal-qty').innerText = qty;
            document.getElementById('modal-title').innerText = name;
            document.getElementById('flavor-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('flavor-modal').classList.add('hidden');
            document.querySelectorAll('input[name="flavor"]').forEach(cb => cb.checked = false);
        }

        function changeQty(val) {
            qty = Math.max(1, qty + val);
            document.getElementById('modal-qty').innerText = qty;
        }

        function addToCart() {
            const flavorsArray = Array.from(document.querySelectorAll('input[name="flavor"]:checked')).map(cb => cb.value);
            if (flavorsArray.length === 0) { alert("Escolha o sabor primeiro!"); return; }

            cart.push({
                id: Date.now(),
                name: currentProduct.name,
                price: currentProduct.price,
                flavors: flavorsArray.join(", "),
                qty: qty,
                subtotal: currentProduct.price * qty
            });
            updateCartUI();
            closeModal();
        }

        function removeItem(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            const totalEl = document.getElementById('total-price');
            if (cart.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-center py-4 italic text-sm">Carrinho vazio</p>';
                totalEl.innerText = `R$ 5,00`;
                return;
            }
            container.innerHTML = cart.map(item => `
                <div class="flex justify-between items-start border-b border-gray-50 pb-3">
                    <div class="flex-1 pr-2">
                        <h4 class="font-bold text-gray-800 text-sm leading-tight">${item.name}</h4>
                        <p class="text-[10px] text-gray-400 font-extrabold uppercase mt-1 tracking-wider">${item.flavors}</p>
                        <p class="text-xs font-bold text-yellow-600 mt-1 uppercase tracking-tighter">${item.qty} x R$ ${item.price.toFixed(2).replace('.', ',')}</p>
                    </div>
                    <div class="text-right">
                        <button onclick="removeItem(${item.id})" class="text-red-400 text-[9px] font-black uppercase tracking-tighter hover:underline">Remover</button>
                        <p class="font-extrabold text-gray-800 text-sm mt-1 italic">R$ ${item.subtotal.toFixed(2).replace('.', ',')}</p>
                    </div>
                </div>
            `).join('');
            const subtotal = cart.reduce((acc, item) => acc + item.subtotal, 0);
            totalEl.innerText = `R$ ${(subtotal + deliveryFee).toFixed(2).replace('.', ',')}`;
        }

        function checkout() {
            const name = document.getElementById('cust-name').value.trim();
            const cep = document.getElementById('end-cep').value.trim();
            const rua = document.getElementById('end-rua').value.trim();
            const num = document.getElementById('end-num').value.trim();
            const bairro = document.getElementById('end-bairro').value.trim();
            const ref = document.getElementById('end-ref').value.trim();

            if (cart.length === 0) { alert("Adicione produtos ao carrinho!"); return; }
            if (!name || !cep || !rua || !num || !bairro) { alert("Preencha os campos de entrega!"); return; }
            if (cep.length < 9) { alert("CEP incompleto!"); return; }

            let message = `Ol√°, gostaria de fazer um pedido Banana TopChips.\n\nCliente: ${name}\n\nPedido:\n`;
            let total = 0;
            cart.forEach(item => {
                message += `\n${item.name}\nSabores: ${item.flavors}\nQuantidade: ${item.qty}\n`;
                total += item.subtotal;
            });
            total += deliveryFee;
            message += `\nEntrega: R$ 5,00\nTotal do pedido: R$ ${total.toFixed(2).replace('.', ',')}\n\nEndere√ßo:\nCEP: ${cep}\nRua: ${rua}, ${num}\nBairro: ${bairro}\nRef: ${ref || 'N√£o informada'}\n\nAguardo confirma√ß√£o, obrigado.`;

            window.open(`https://wa.me/5516996378502?text=${encodeURIComponent(message)}`, '_blank');
        }
    </script>
</body>
</html>